from fastapi import APIRouter, HTTPExceptionfrom app.models.user import Userfrom app.services.mongo_service import create_user, get_user_by_usernamerouter = APIRouter(prefix="/users", tags=["users"])@router.post("/")def api_create_user(user: User):    """Создаёт нового пользователя"""    existing = get_user_by_username(user.username)    if existing:        raise HTTPException(status_code=400, detail="Username уже занят")    user_id = create_user(user.dict())    return {"message": "Пользователь создан", "id": user_id}@router.get("/{username}")def api_get_user(username: str):    """Получает пользователя по username"""    user = get_user_by_username(username)    if not user:        raise HTTPException(status_code=404, detail="Пользователь не найден")    user["_id"] = str(user["_id"])  # Mongo ObjectId в строку    return user